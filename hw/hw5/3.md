**Question:**

Inode和FAT有什么区别？

**Answer:**

FAT表即File Allocation Table，是FAT文件系统的主要组成部分，这个表是一个数组，每一个元素对应磁盘上的一个块(cluster)，文件通过链表的形式，找到文件的第一个数据块后就可以按链表依次定位下一个数据块，直到EOF。

FAT的设计较为简单，因此存在较多的问题：
1. FAT表在大容量磁盘上会过于巨大，假设一个512GB的磁盘，每一个块大小为1KB，这样需要512MB的FAT表，而FAT表储存在硬盘中，仅仅保存FAT表就占用0.5GB内存是不切实际的，即使采用换出的方案也会占用大量的内存
2. 随机访问性能较差，由于采用链表的形式储存，访问文件必须从头文件块开始，而遍历链表所需的时间较长，因此随机访问性能差。
3. 限制单个文件大小，以FAT32为例，表每一个元素的为32位且有4位保留，因此只有28位用于索引，最多表示$2^{28}$个数据块，假设每一个数据块大小1KB，FAT32理论的最大文件大小为256GB，而现实中限制FAT32文件系统下最大单个文件大小为4GB

Inode即index node，inode通过inode表进行索引，在每一个inode中，储存了这个文件的相关信息，例如是否可执行，最近访问时间等信息，同时inode中有一组磁盘指针，这些指针可能是直接或间接的，直接指针直接指向对应的数据块，而间接指针指向一个包含更多文件指针的数据块，通过这样的方式可以拓展一个inode能记录文件文件的最大大小。间接指针还可以拓展为双重甚至更多的间接指针，进一步拓展单个文件大小的上限。

inode相比与FAT，有较大的优势
1. 随机访问性能更好
2. 对大文件的支持更好
3. 文件元数据更加丰富
4. 可以实现硬链接